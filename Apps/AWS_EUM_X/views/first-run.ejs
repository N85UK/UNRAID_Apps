<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>AWS EUM X — First run</title>
    <link rel="stylesheet" href="/css/style.css">
  </head>
  <body>
    <div class="container">
      <div class="header">
        <img src="/icons/icon.svg" alt="AWS EUM X" width="48" height="48">
        <h1>AWS EUM X — First run</h1>
      </div>

      <p>Version: <%= version %></p>

      <% if (hasSavedCredentials) { %>
      <div style="padding: 12px; background: #d1ecf1; border-left: 4px solid #0c5460; color: #0c5460; margin-bottom: 16px; border-radius: 4px;">
        ✓ Saved credentials loaded. You can test or update them below.
      </div>
      <% } %>

      <form id="credentials-form">
        <label for="awsAccessKey">AWS Access Key ID</label>
        <input id="awsAccessKey" name="awsAccessKey" placeholder="AKIA..." value="<%= savedAccessKey %>" />

        <label for="awsSecretKey">AWS Secret Access Key</label>
        <input id="awsSecretKey" name="awsSecretKey" placeholder="Secret..." type="password" />

        <label for="awsRegion">AWS Region</label>
        <input id="awsRegion" name="awsRegion" placeholder="eu-west-2" value="<%= savedRegion %>" />

        <div class="checkbox-wrapper">
          <input type="checkbox" id="saveCredentials" name="saveCredentials" <%= hasSavedCredentials ? 'checked' : '' %> />
          <label for="saveCredentials">Save credentials to database (encrypted at rest)</label>
        </div>

        <div style="margin-top:12px">
          <button type="submit">Test credentials (no message sent)</button>
        </div>
      </form>

      <div id="test-status" role="status" aria-live="polite"></div>

      <hr />

      <h2>Dry-run test message</h2>
      <form id="dryrun-form">
        <label for="destNumber">Destination (E.164)</label>
        <input id="destNumber" name="destNumber" placeholder="+447700900000" />

        <label for="messageBody">Message</label>
        <textarea id="messageBody" name="messageBody" rows="4" placeholder="Hello, this is a test."></textarea>
        <div id="char-info">Characters: <span id="char-count">0</span> • Parts: <span id="part-count">0</span> (<span id="encoding">GSM-7</span>)</div>

        <div style="margin-top:12px">
          <button type="submit">Run Dry-Run (no SMS will be sent)</button>
        </div>
      </form>

      <div id="dryrun-status" role="status" aria-live="polite"></div>

  <p style="margin-top:24px">Tip: Use dry-run to test configuration without sending SMS. See the <a href="/docs/">documentation</a> for IAM policy examples. View <a href="/dashboard">dashboard</a> to monitor queue and configure per-origin limits.</p>

    </div>

    <script src="/js/app.js"></script>
  </body>
  </html>
