Application: AWS End User Messaging (EUM) v2.0
Name: AWS_EUM
Version: 2.0.0
Author: N85UK
Description: Enhanced AWS SMS application with UNRAID integration. Automatically pulls phone numbers from AWS and supports longer messages. Full configuration through UNRAID interface.
Repository: ghcr.io/n85uk/aws-eum:2.0

WebUI: http://[IP]:[PORT:80]
Icon: https://raw.githubusercontent.com/N85UK/UNRAID_Apps/main/Apps/AWS_EUM/icon.png

Network: bridge
Privileged: false

Config:
  - name: AWS Configuration
    type: label
    description: Configure your AWS credentials and region
  
  - name: AWS_ACCESS_KEY_ID
    label: AWS Access Key ID
    env: AWS_ACCESS_KEY_ID
    default: ''
    description: Your AWS access key ID (required for AWS services)
    required: true
    type: password
    mask: true
  
  - name: AWS_SECRET_ACCESS_KEY
    label: AWS Secret Access Key
    env: AWS_SECRET_ACCESS_KEY
    default: ''
    description: Your AWS secret access key (keep secure!)
    required: true
    type: password
    mask: true
  
  - name: AWS_REGION
    label: AWS Region
    env: AWS_REGION
    default: 'eu-west-2'
    description: AWS region where your SMS resources are located
    type: variable
    options:
      - us-east-1
      - us-west-2
      - eu-west-1
      - eu-west-2
      - eu-central-1
      - ap-southeast-1
      - ap-southeast-2
      - ap-northeast-1
      - ca-central-1
  
  - name: Application Settings
    type: label
    description: Configure application behavior and security
  
  - name: PORT
    label: Application Port
    env: PORT
    default: '80'
    description: Internal container port (default 80)
    type: variable
  
  - name: RATE_LIMIT_MESSAGES
    label: Rate Limit (Messages/Minute)
    env: RATE_LIMIT_MESSAGES
    default: '10'
    description: Maximum SMS messages per minute per IP (prevents abuse)
    type: variable
  
  - name: MAX_MESSAGE_LENGTH
    label: Maximum Message Length
    env: MAX_MESSAGE_LENGTH
    default: '1600'
    description: Maximum characters allowed in a single message (SMS will auto-segment)
    type: variable
  
  - name: HISTORY_RETENTION
    label: Message History Retention
    env: HISTORY_RETENTION
    default: '100'
    description: Number of messages to keep in history
    type: variable
  
  - name: Manual Configuration (Optional)
    type: label
    description: Manual originator configuration (app auto-fetches from AWS)
  
  - name: ORIGINATORS
    label: Manual Originators
    env: ORIGINATORS
    default: ''
    description: Optional manual originators (format: Label1:arn1,Label2:arn2). App automatically fetches from AWS.
    type: variable
  
  - name: ENABLE_DEBUG
    label: Enable Debug Logging
    env: ENABLE_DEBUG
    default: 'false'
    description: Enable detailed logging for troubleshooting
    type: variable
    options:
      - 'true'
      - 'false'

Ports:
  - name: Web Interface
    internal: 80
    external: 8280
    protocol: tcp
    description: Web interface for sending SMS messages

Volumes:
  - name: Application Data
    internal: /app/data
    external: /mnt/user/appdata/aws-eum
    mode: rw
    description: Stores message history and application data

Notes:
  Enhanced Features:
  - Automatically pulls available phone numbers and originators from AWS
  - Supports longer messages with automatic SMS segmentation
  - Real-time message length counter and cost estimation
  - Rate limiting to prevent abuse
  - Improved security with helmet.js
  - Full UNRAID configuration interface
  - Debug logging and health monitoring
  
  Setup Instructions:
  1. Install the app through UNRAID Community Applications
  2. Enter your AWS Access Key ID and Secret Access Key
  3. Select your AWS region
  4. The app will automatically discover your available phone numbers
  5. Access the web interface at http://[server-ip]:8280
  
  Security Notes:
  - AWS credentials are encrypted and stored securely
  - Rate limiting prevents SMS abuse
  - CSP headers and security middleware included
  - No credentials are included in the template
  
  For CA Review:
  - Template includes no secrets or credentials
  - User must provide their own AWS credentials
  - Licensed under MIT License
  - See README_CA.md and doc.md for detailed review information

PostArgs:
  - --restart=unless-stopped
  - --memory=512m
  - --cpu-shares=1024
